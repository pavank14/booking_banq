<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banquet Booking</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Banquet Hall Booking</h1>
    <div class="calendar-controls">
        <button id="prevMonth">&#10094;</button>
        <span id="currentMonthYear"></span>
        <button id="nextMonth">&#10095;</button>
    </div>
    <div class="calendar" id="calendar"></div>
    
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2 id="modalTitle">Book Event</h2>
            <div id="bookingForm">
                <input type="text" id="name" placeholder="Name">
                <input type="text" id="phone" placeholder="Phone No">
                <input type="text" id="village" placeholder="Village Name">
                <input type="number" id="price" placeholder="Price">
                <select id="event">
                    <option value="Marriage">Marriage</option>
                    <option value="Engagement">Engagement</option>
                    <option value="Birthday">Birthday</option>
                    <option value="Baby Shower">Baby Shower</option>
                    <option value="Haldi Program">Haldi Program</option>
                </select>
                <button id="saveBooking">Save Booking</button>
            </div>
            <div id="bookingDetails" style="display: none;"></div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const calendar = document.getElementById("calendar");
            const currentMonthYear = document.getElementById("currentMonthYear");
            const prevMonthBtn = document.getElementById("prevMonth");
            const nextMonthBtn = document.getElementById("nextMonth");
            const bookingModal = document.getElementById("bookingModal");
            const closeModal = document.getElementById("closeModal");
            const saveBooking = document.getElementById("saveBooking");
            const bookingForm = document.getElementById("bookingForm");
            const bookingDetails = document.getElementById("bookingDetails");
            const modalTitle = document.getElementById("modalTitle");
            let selectedDate;
            let bookings = JSON.parse(localStorage.getItem("bookings")) || {};

            let today = new Date();
            let currentMonth = today.getMonth();
            let currentYear = today.getFullYear();

            function renderCalendar(month, year) {
                calendar.innerHTML = "";
                let firstDay = new Date(year, month, 1).getDay();
                let daysInMonth = new Date(year, month + 1, 0).getDate();
                currentMonthYear.textContent = new Date(year, month).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

                for (let i = 0; i < firstDay; i++) {
                    calendar.innerHTML += '<div></div>';
                }
                for (let day = 1; day <= daysInMonth; day++) {
                    let dateKey = `${year}-${month + 1}-${day}`;
                    let dayElement = document.createElement("div");
                    dayElement.textContent = day;
                    dayElement.dataset.date = dateKey;
                    if (bookings[dateKey]) {
                        dayElement.classList.add("booked");
                    }
                    dayElement.addEventListener("click", function () {
                        selectedDate = this.dataset.date;
                        if (bookings[selectedDate]) {
                            showBookingDetails(selectedDate);
                        } else {
                            showBookingForm();
                        }
                        bookingModal.style.display = "block";
                    });
                    calendar.appendChild(dayElement);
                }
            }

            function showBookingForm() {
                modalTitle.textContent = "Book Event";
                bookingForm.style.display = "block";
                bookingDetails.style.display = "none";
            }

            function showBookingDetails(date) {
                let booking = bookings[date];
                modalTitle.textContent = "Booking Details";
                bookingDetails.innerHTML = `
                    <p><strong>Name:</strong> ${booking.name}</p>
                    <p><strong>Phone:</strong> ${booking.phone}</p>
                    <p><strong>Village:</strong> ${booking.village}</p>
                    <p><strong>Price:</strong> ${booking.price}</p>
                    <p><strong>Event:</strong> ${booking.event}</p>
                `;
                bookingForm.style.display = "none";
                bookingDetails.style.display = "block";
            }

            prevMonthBtn.addEventListener("click", function () {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar(currentMonth, currentYear);
            });

            nextMonthBtn.addEventListener("click", function () {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar(currentMonth, currentYear);
            });

            closeModal.addEventListener("click", function () {
                bookingModal.style.display = "none";
            });

            saveBooking.addEventListener("click", function () {
                let name = document.getElementById("name").value;
                let phone = document.getElementById("phone").value;
                let village = document.getElementById("village").value;
                let price = document.getElementById("price").value;
                let event = document.getElementById("event").value;

                if (name && phone && village && price && event) {
                    bookings[selectedDate] = { name, phone, village, price, event };
                    localStorage.setItem("bookings", JSON.stringify(bookings));
                    bookingModal.style.display = "none";
                    renderCalendar(currentMonth, currentYear);
                } else {
                    alert("Please fill all fields");
                }
            });

            renderCalendar(currentMonth, currentYear);
        });
    </script>
</body>
</html>
